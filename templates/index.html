<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ETH Wallet Tracker</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { background: #121212; color: white; }
  .btn-sm { margin-right: 5px; margin-bottom: 5px; }
  .select-currency.active { background-color: #0d6efd; color: white; }
</style>
</head>
<body class="container mt-5">
<h2>ðŸ”— ETH Wallet Tracker</h2>

<form method="POST" class="mb-4">
  <input type="text" name="wallet_address" placeholder="Enter Ethereum Wallet Address" class="form-control mb-2" value="{{ wallet_address }}">
  <button type="submit" class="btn btn-primary">Track Wallet</button>
</form>

{% if error %}
<div class="alert alert-danger">{{ error }}</div>
{% endif %}

{% if balance %}
<h4>ðŸ’° ETH Balance: {{ balance }} ETH</h4>

<table class="table table-dark table-striped mt-3">
<thead>
<tr><th>Currency</th><th>Value</th></tr>
</thead>
<tbody>
{% for fiat in fiats %}
<tr>
<td>{{ fiat.upper() }}</td>
<td>{{ values[fiat] }}</td>
</tr>
{% endfor %}
</tbody>
</table>

<h5>ðŸ“ˆ 24-Hour Price Trends</h5>
<div class="mb-2">
  {% for fiat in fiats %}
    <button class="btn btn-secondary btn-sm select-currency" data-fiat="{{ fiat }}">{{ fiat.upper() }}</button>
  {% endfor %}
</div>

<canvas id="priceTrendChart"></canvas>

<!-- Pass Flask data to JS -->
<script>
const walletAddress = "{{ wallet_address }}";
const priceTrends = {{ price_trends | tojson }};
const fiats = {{ fiats | tojson }};
</script>

<!-- Load JS separately -->
<script src="{{ url_for('static', filename='wallet.js') }}"></script>

{% endif %}
</body>
</html>
